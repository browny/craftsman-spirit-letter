# *Craftsman-Spirit #9*

Welcome to this weekâ€™s edition of [Craftsman-Spirit](https://tinyletter.com/craftsman-spirit), where I share smart ideas for your relentless pursuit of excellence.

edited by [@brownylin](https://twitter.com/brownylin) with ğŸ’– at *2017-11-19*


## **What Iâ€™m reading â€”**

### ğŸ”– [Observability: Metrics -> Logging -> Tracing (in that order)](https://twitter.com/peterbourgon/status/931377494468435969)

**tags**: `#Observability`, `#Monitoring`

é€™å€‹æ¨æ–‡ä¸²é‚„è »å€¼å¾— highlight ä¸€ä¸‹çš„ï¼Œ[@peterbourgon](https://twitter.com/peterbourgon) é—¡è¿°ä»–å°æ–¼å¹¾ç¨®é”æˆ Observability æ‰‹æ®µ (`Metrics`, `Logging` and `Tracing`) çš„çœ‹æ³•ï¼Œæˆ‘æ·±æ„ŸèªåŒã€‚

ç³»çµ±çµ•å¤§éƒ¨ä»½çš„å•é¡Œå¯ä»¥é€éè‰¯å¥½çš„ metrics instrumentation ä¾†ææ—©ç™¼ç¾ï¼Œå¦‚åŒå¥½çš„  error handling ä¸€æ¨£ï¼Œåœ¨è¨­è¨ˆçš„æ™‚å€™å°±è¦æŠŠä¸€äº› é æœŸ/å¯èƒ½ ç™¼ç”Ÿçš„éŒ¯èª¤éƒ½é€é metrics ç™¼é€å‡ºä¾†ã€‚

è€Œ logging é€šå¸¸æ˜¯åœ¨å•é¡Œç™¼ç¾å¾Œç”¨ä¾†é‡æ¸…ç‹€æ³æ™‚ä½¿ç”¨ã€‚æ›å¥è©±èªªï¼Œå¦‚æœä½ æ˜¯é€é logging åœ¨**ç™¼ç¾**å•é¡Œçš„è©±ï¼Œé‚£ä»£è¡¨ä½ çš„ metrics åšçš„ä¸å¤ å¥½ï¼Œé€™æ™‚å€™æ‡‰è©²å›é ­è£œå¼· metricsã€‚

è‡³æ–¼ tracing æˆ‘è¦ºå¾—æ˜¯ç•¶æ¨¡çµ„å½¼æ­¤é–“çš„æºé€šè¤‡é›œåº¦åˆ°é”ä¸€å®šç¨‹åº¦æ™‚æ‰éœ€è¦å¼•å…¥çš„æ‰‹æ®µï¼Œæœ‰æ™‚å€™å–®ä¸€æ¨¡çµ„çš„ metrics ç™¼ç”Ÿç•°å¸¸ä¸¦ä¸ä¸€å®šä»£è¡¨æ‡‰è©²ç™¼å‡º alert (è¤‡é›œç³»çµ±ä¸­ï¼Œå–®ä¸€åŠŸèƒ½å¾€å¾€æ¶‰åŠå¤šå€‹æ¨¡çµ„çš„å”ä½œ)ã€‚

é€™æ™‚å€™ï¼Œtracing å¯ä»¥å¹«åŠ©æˆ‘å€‘è¦–è¦ºåŒ–æ•´å€‹æµç¨‹çš„**æ™‚åºé—œä¿‚**ï¼Œè®“æˆ‘å€‘å¯ä»¥æ›´å¿«é€Ÿå»å®šä½å‡ºå•é¡Œçš„ç’°ç¯€ï¼Œè€Œä¸æ˜¯è‡ªå·±åœ¨è…¦ä¸­æŠŠé€™äº› metrics ä¸²æˆä¸€å€‹æ•…äº‹ã€‚

**æ‰€ä»¥ï¼ŒåŠ å¼·ç³»çµ±çš„å¯è¦‹æ€§ (Observability)ï¼Œä¾åºåŠ å¼·ç³»çµ±çš„ metrics å’Œ loggingï¼Œè¡Œæœ‰é¤˜åŠ›å†åŠ ä¸Š tracingã€‚**


### ğŸ”– [Instrumenting systems for arbitrary observability](https://conferences.oreilly.com/velocity/vl-ny/public/schedule/detail/61630)

**tags**: `#Observability`, `#Instrumentation`

![](https://pbs.twimg.com/media/DLUJQ5cW4A83jfv.jpg)

> - Monitoring the work is more important than the resources
> - Metrics are aggregations of events, and they can be awesome too
> - Focus on the most valuable, cheapest, easiest stuff

é€™ç¯‡å‰›å¥½ä½œç‚ºä¸Šä¸€ç¯‡çš„è£œå……ï¼Œè¦æœ‰å¥½çš„ observability å¿…ç„¶è¦åœ¨ç³»çµ±ä¸­æ·»åŠ è¨±å¤š instrumentation é‚è¼¯ã€‚é‚£éº¼ï¼Œæˆ‘å€‘æ‡‰è©²ç›£æ¸¬å“ªäº›æ±è¥¿å‘¢ï¼Ÿé€™ç¯‡æ–‡ç« è£¡é¢æœ‰ä¸å°‘å¯¶è²´çš„ç¶“é©—ã€‚

### ğŸ”– [Coupling and Cohesion](https://web.archive.org/web/20090411030053/http://threeriversinstitute.org/blog?p=104)

**tags**: `#Design`, `#Architect`

> Coupling measures the spread of a change across elements. Cohesion measures the cost of a change within an element. An element is cohesive to the degree that the entire element changes when the system needs to change.
>
> An element can lack cohesion either by being too large or too small. An element that is too small, solving only part of a problem, will have to be coupled to elements solving the other parts of the problem. Changing the solution will require changing all the elements. An element that solves several problems will only be partly changed. This is riskier and more expensive than changing a whole element because first you need to figure out what part of the element should be changed and then you need to prove that the unchanged part of the element is truly unchanged. Cohesive elements, replaced in total, don't incur these costs

cohesion åŸä¾†å¯ä»¥é€™æ¨£ç†è§£å•Šï¼Œä¸€ç›´éƒ½è¦ºå¾—é€™å€‹æ¦‚å¿µå¾ˆé›£æè¿°ï¼ŒåŸä¾†å°±æ˜¯ **å° changes çš„ä¸€ç¨® transaction å•Š**

> One of the things about design that makes it such a joy is that it requires balance. If elements are too large, each change will be more expensive than it needs to be. If elements are too small, changes will ripple across elements
>
> This suggests that the most care should be spent on reducing coupling. This is a bit puzzling as my practice is generally to make more smaller pieces. Perhaps I'm just confident of my ability reduce coupling

ä¸é cohesion é€™ç¨®æ±è¥¿çœŸçš„æ˜¯äººç”Ÿé›£é¡Œï¼Œä¹Ÿæ˜¯è¨­è¨ˆä¹‹ç¾ã€‚å¯ä»¥é€™æ¨£ç†è§£ï¼Œä½è€¦åˆå…¶å¯¦æ˜¯ç³»çµ±æŒçºŒå¾€é«˜å…§èšæ¼”é€²çš„ä¸€å€‹å¿…è¦æ‰‹æ®µã€‚

åœ¨éœ€æ±‚ä¸æ–·è®Šå‹•çš„å¤–åœ¨ç’°å¢ƒä¸‹ï¼Œä½è€¦åˆçš„ç‰¹æ€§å¯ä»¥è®“ç³»çµ±å…§çš„å„å€‹å…ƒä»¶ç¨ç«‹çš„æ”¹è®Šä»¥é©æ‡‰æ–°çš„éœ€æ±‚ï¼Œé€²è€Œæ›´åŠ ç¢ºç«‹è‡ªå·±çš„è·è²¬é”åˆ°é«˜å…§èšçš„ç‰¹æ€§ã€‚

### ğŸ”– [In-depth introduction to bufio.Scanner in Golang](https://medium.com/golangspec/in-depth-introduction-to-bufio-scanner-in-golang-55483bb689b4)

**tags**: `#Go`, `#Bufio`

æœ€è¿‘åœ¨è™•ç† Go exec åŸ·è¡Œ ffmpeg çš„ log parsing å‰›å¥½æœ‰ç”¨åˆ° `bufio.Scanner`ï¼Œä½¿ç”¨å…§å»ºçš„ `ScanLines` split func ä¸¦æ²’è¾¦æ³•æŠ“åˆ° fps å’Œ bitrate é‚£è¡Œä¸æ–· update çš„ logï¼ŒåŸå› æ˜¯å› ç‚ºé€™è¡Œ log ä¸¦æ²’æœ‰ç”¨ newline åˆ†è¡Œã€‚

ä¹‹å¾Œç´¢æ€§å°±è‡ªå·±å¼„äº†ä¸€å€‹å®¢è£½åŒ–çš„ split funcï¼Œç›´æ¥å›å‚³æ•´å€‹ä¹Ÿä¸ç”¨ split äº† XDDï¼Œç›®å‰çœ‹èµ·ä¾†å ªç”¨ï¼Œç„¶å¾Œå¦‚æœæ—©é»çœ‹åˆ°é€™ç¯‡æ–‡ç« å°±å¥½æƒ¹ï¼Œå“­å“­ã€‚


## **The valuable resources â€”**

### ğŸ”¦ [Capture ffmpeg output when executed by Go os/exec pkg](https://gist.github.com/browny/08a46da180a18f3c5d9397201aa5f889)

æŠŠè‡ªå·±çš„æ±è¥¿æ”¾åœ¨ valuable resources å¥½åƒæœ‰é»ç„¡æ¥ï¼Œä¸éæœ¬é€±å¯¦åœ¨æ²’æœ‰ä»€éº¼æ¢—åªå¥½æ‹¿è‡ªå·±çš„æ±è¥¿ä¾†å¢Šæª”ä¸€ä¸‹ã€‚

å·¥ä½œä¸Šæœ‰éœ€è¦ä½œä¸€å€‹ module åˆ©ç”¨ ffmpeg ä½œä¸€äº›ä¸²æµ fanout çš„ä»»å‹™ï¼Œå› ç‚ºé€™å€‹æœå‹™è¦è·Ÿæˆ‘å€‘æ—¢æœ‰çš„ infrastructure æ•´åˆåœ¨ä¸€èµ·ï¼Œæ‰€ä»¥ç”¨ Go exec åœ¨å¤–é¢åŒ…ä¸€å±¤æœƒæ˜¯æ¯”è¼ƒæœ‰å½ˆæ€§çš„æ–¹å¼ã€‚

ç„¶å¾Œåˆå¸Œæœ›é€™å€‹ Go module å¯ä»¥æ¥æ”¶ ffmpeg çš„ output log ä½œä¸€äº› error handling æ‰€ä»¥å°±æœ‰äº†ä¸Šé¢é€™å€‹ gist å›‰ï¼Œæœ‰éœ€è¦çš„äººå¯ä»¥åƒè€ƒçœ‹çœ‹ XDã€‚


## **The quotes Iâ€™m pondering â€”**

#### ğŸ“Œ It's not "hard" skills vs "soft" skills - its "technical" vs "professional" skills

<blockquote class="twitter-tweet" data-lang="zh-tw"><p lang="en" dir="ltr">OH: It&#39;s not &quot;hard&quot; skills vs &quot;soft&quot; skills - its &quot;technical&quot; vs &quot;professional&quot; skills.</p>&mdash; Russell Keith-Magee (@freakboy3742) <a href="https://twitter.com/freakboy3742/status/907032201497255942?ref_src=twsrc%5Etfw">2017å¹´9æœˆ11æ—¥</a></blockquote>

#### ğŸ“Œ You are entitled to your own opinion, but you are not entitled to your own facts

<blockquote class="twitter-tweet" data-lang="zh-tw"><p lang="en" dir="ltr">â€œYou are entitled to your own opinion, but you are not entitled to your own facts.â€<br><br>â€” Daniel Patrick Moynihan</p>&mdash; Shane Parrish (@farnamstreet) <a href="https://twitter.com/farnamstreet/status/929309769923551232?ref_src=twsrc%5Etfw">2017å¹´11æœˆ11æ—¥</a></blockquote>

#### ğŸ“Œ We donâ€™t see things as they are, we see them as we are

<blockquote class="twitter-tweet" data-lang="zh-tw"><p lang="en" dir="ltr">&quot;We donâ€™t see things as they are, we see them as we are.&quot;<br>Anais Nin<a href="https://twitter.com/hashtag/qotd?src=hash&amp;ref_src=twsrc%5Etfw">#qotd</a></p>&mdash; Markus Eisele (@myfear) <a href="https://twitter.com/myfear/status/929026474761445376?ref_src=twsrc%5Etfw">2017å¹´11æœˆ10æ—¥</a></blockquote>


## **The jokes entertain me â€”**

#### ğŸ¤£ AI degradation

<blockquote class="twitter-tweet" data-lang="zh-tw"><p lang="en" dir="ltr">When youâ€™re fundraising, itâ€™s AI<br>When youâ€™re hiring, itâ€™s ML<br>When youâ€™re implementing, itâ€™s linear regression<br>When youâ€™re debugging, itâ€™s printf()</p>&mdash; Baron Schwartz (@xaprb) <a href="https://twitter.com/xaprb/status/930674776317849600?ref_src=twsrc%5Etfw">2017å¹´11æœˆ15æ—¥</a></blockquote>

#### ğŸ¤£ Move fast and break things (if you can fix after)

<blockquote class="twitter-tweet" data-lang="zh-tw"><p lang="en" dir="ltr">Pro-tip to developers: only â€œMove fast and break thingsâ€ if youâ€™re confident you can fix things after youâ€™ve broken them ...</p>&mdash; Duncan Doyle (@DuncanDoyle) <a href="https://twitter.com/DuncanDoyle/status/929574650354466816?ref_src=twsrc%5Etfw">2017å¹´11æœˆ12æ—¥</a></blockquote>


Thatâ€™s all!

Iâ€™ll see you next week, Browny
